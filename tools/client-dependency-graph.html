<!doctype html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>dependency graph</title>
    <style>
      .node:active path,
.node:hover path,
.node.current path,
.node:active polygon,
.node:hover polygon,
.node.current polygon {
  stroke: fuchsia;
  stroke-width: 2;
}

.edge:active path,
.edge:hover path,
.edge.current path,
.edge:active ellipse,
.edge:hover ellipse,
.edge.current ellipse {
  stroke: url(#edgeGradient);
  stroke-width: 3;
  stroke-opacity: 1;
}

.edge:active polygon,
.edge:hover polygon,
.edge.current polygon {
  stroke: fuchsia;
  stroke-width: 3;
  fill: fuchsia;
  stroke-opacity: 1;
  fill-opacity: 1;
}

.edge:active text,
.edge:hover text {
  fill: fuchsia;
}

.cluster path {
  stroke-width: 3;
}

.cluster:active path,
.cluster:hover path {
  fill: #ffff0011;
}

div.hint {
  background-color: #000000aa;
  color: white;
  font-family: Arial, Helvetica, sans-serif;
  border-radius: 1rem;
  position: fixed;
  top: calc(50% - 4em);
  right: calc(50% - 10em);
  border: none;
  padding: 1em 3em 1em 1em;
}

.hint button {
  position: absolute;
  font-weight: bolder;
  right: 0.6em;
  top: 0.6em;
  color: inherit;
  background-color: inherit;
  border: 1px solid currentColor;
  border-radius: 1em;
  margin-left: 0.6em;
}

.hint a {
  color: inherit;
}

#button_help {
  color: white;
  background-color: #00000011;
  border-radius: 1em;
  position: fixed;
  top: 1em;
  right: 1em;
  font-size: 24pt;
  font-weight: bolder;
  width: 2em;
  height: 2em;
  border: none;
}

#button_help:hover {
  cursor: pointer;
  background-color: #00000077;
}

@media print {
  #button_help {
    display: none;
  }

  div.hint {
    display: none;
  }
}

    </style>
  </head>
  <body>
    <button id="button_help">?</button>
    <div id="hints" class="hint" style="display: none">
      <button id="close-hints">x</button>
      <span id="hint-text"></span>
      <ul>
        <li><b>Hover</b> - highlight</li>
        <li><b>Right-click</b> - pin highlight</li>
        <li><b>ESC</b> - clear</li>
      </ul>
    </div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.0 (20241103.1931)
 -->
<!-- Title: dependency&#45;cruiser output Pages: 1 -->
<svg width="464pt" height="281pt"
 viewBox="0.00 0.00 464.25 281.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 277)">
<title>dependency&#45;cruiser output</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-277 460.25,-277 460.25,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_app</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M20,-24C20,-24 284.25,-24 284.25,-24 290.25,-24 296.25,-30 296.25,-36 296.25,-36 296.25,-253 296.25,-253 296.25,-259 290.25,-265 284.25,-265 284.25,-265 20,-265 20,-265 14,-265 8,-259 8,-253 8,-253 8,-36 8,-36 8,-30 14,-24 20,-24"/>
<text text-anchor="middle" x="152.12" y="-252.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">app</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_app/_components</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M168.75,-124C168.75,-124 255.75,-124 255.75,-124 261.75,-124 267.75,-130 267.75,-136 267.75,-136 267.75,-200 267.75,-200 267.75,-206 261.75,-212 255.75,-212 255.75,-212 168.75,-212 168.75,-212 162.75,-212 156.75,-206 156.75,-200 156.75,-200 156.75,-136 156.75,-136 156.75,-130 162.75,-124 168.75,-124"/>
<text text-anchor="middle" x="212.25" y="-199.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">_components</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_app/_components/Background</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M176.75,-132C176.75,-132 247.75,-132 247.75,-132 253.75,-132 259.75,-138 259.75,-144 259.75,-144 259.75,-173 259.75,-173 259.75,-179 253.75,-185 247.75,-185 247.75,-185 176.75,-185 176.75,-185 170.75,-185 164.75,-179 164.75,-173 164.75,-173 164.75,-144 164.75,-144 164.75,-138 170.75,-132 176.75,-132"/>
<text text-anchor="middle" x="212.25" y="-172.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">Background</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_app/_hooks</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M28,-32C28,-32 116.25,-32 116.25,-32 122.25,-32 128.25,-38 128.25,-44 128.25,-44 128.25,-73 128.25,-73 128.25,-79 122.25,-85 116.25,-85 116.25,-85 28,-85 28,-85 22,-85 16,-79 16,-73 16,-73 16,-44 16,-44 16,-38 22,-32 28,-32"/>
<text text-anchor="middle" x="72.12" y="-72.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">_hooks</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_app/_providers</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M148.25,-32C148.25,-32 276.25,-32 276.25,-32 282.25,-32 288.25,-38 288.25,-44 288.25,-44 288.25,-104 288.25,-104 288.25,-110 282.25,-116 276.25,-116 276.25,-116 148.25,-116 148.25,-116 142.25,-116 136.25,-110 136.25,-104 136.25,-104 136.25,-44 136.25,-44 136.25,-38 142.25,-32 148.25,-32"/>
<text text-anchor="middle" x="212.25" y="-103.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">_providers</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_src</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M316.25,-8C316.25,-8 436.25,-8 436.25,-8 442.25,-8 448.25,-14 448.25,-20 448.25,-20 448.25,-84 448.25,-84 448.25,-90 442.25,-96 436.25,-96 436.25,-96 316.25,-96 316.25,-96 310.25,-96 304.25,-90 304.25,-84 304.25,-84 304.25,-20 304.25,-20 304.25,-14 310.25,-8 316.25,-8"/>
<text text-anchor="middle" x="376.25" y="-83.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">src</text>
</g>
<g id="clust7" class="cluster">
<title>cluster_src/client</title>
<path fill="#ffffff" stroke="black" stroke-width="2" d="M324.25,-16C324.25,-16 428.25,-16 428.25,-16 434.25,-16 440.25,-22 440.25,-28 440.25,-28 440.25,-57 440.25,-57 440.25,-63 434.25,-69 428.25,-69 428.25,-69 324.25,-69 324.25,-69 318.25,-69 312.25,-63 312.25,-57 312.25,-57 312.25,-28 312.25,-28 312.25,-22 318.25,-16 324.25,-16"/>
<text text-anchor="middle" x="376.25" y="-56.45" font-family="Helvetica,sans-Serif" font-weight="bold" font-size="9.00">client</text>
</g>
<!-- app/_components/Background/Background.tsx -->
<g id="node1" class="node">
<title>app/_components/Background/Background.tsx</title>
<g id="a_node1"><a xlink:href="app/_components/Background/Background.tsx" xlink:title="Background.tsx">
<path fill="#bbfeff" stroke="black" d="M245.58,-158.25C245.58,-158.25 178.92,-158.25 178.92,-158.25 175.83,-158.25 172.75,-155.17 172.75,-152.08 172.75,-152.08 172.75,-145.92 172.75,-145.92 172.75,-142.83 175.83,-139.75 178.92,-139.75 178.92,-139.75 245.58,-139.75 245.58,-139.75 248.67,-139.75 251.75,-142.83 251.75,-145.92 251.75,-145.92 251.75,-152.08 251.75,-152.08 251.75,-155.17 248.67,-158.25 245.58,-158.25"/>
<text text-anchor="start" x="180.75" y="-145.7" font-family="Helvetica,sans-Serif" font-size="9.00">Background.tsx</text>
</a>
</g>
</g>
<!-- app/_hooks/useDependency.tsx -->
<g id="node2" class="node">
<title>app/_hooks/useDependency.tsx</title>
<g id="a_node2"><a xlink:href="app/_hooks/useDependency.tsx" xlink:title="useDependency.tsx">
<path fill="#bbfeff" stroke="black" d="M114.08,-58.25C114.08,-58.25 30.17,-58.25 30.17,-58.25 27.08,-58.25 24,-55.17 24,-52.08 24,-52.08 24,-45.92 24,-45.92 24,-42.83 27.08,-39.75 30.17,-39.75 30.17,-39.75 114.08,-39.75 114.08,-39.75 117.17,-39.75 120.25,-42.83 120.25,-45.92 120.25,-45.92 120.25,-52.08 120.25,-52.08 120.25,-55.17 117.17,-58.25 114.08,-58.25"/>
<text text-anchor="start" x="32" y="-45.7" font-family="Helvetica,sans-Serif" font-size="9.00">useDependency.tsx</text>
</a>
</g>
</g>
<!-- app/_providers/DependencyProvider.tsx -->
<g id="node3" class="node">
<title>app/_providers/DependencyProvider.tsx</title>
<g id="a_node3"><a xlink:href="app/_providers/DependencyProvider.tsx" xlink:title="DependencyProvider.tsx">
<path fill="#bbfeff" stroke="black" d="M263.96,-58.25C263.96,-58.25 160.54,-58.25 160.54,-58.25 157.46,-58.25 154.38,-55.17 154.38,-52.08 154.38,-52.08 154.38,-45.92 154.38,-45.92 154.38,-42.83 157.46,-39.75 160.54,-39.75 160.54,-39.75 263.96,-39.75 263.96,-39.75 267.04,-39.75 270.12,-42.83 270.12,-45.92 270.12,-45.92 270.12,-52.08 270.12,-52.08 270.12,-55.17 267.04,-58.25 263.96,-58.25"/>
<text text-anchor="start" x="162.38" y="-45.7" font-family="Helvetica,sans-Serif" font-size="9.00">DependencyProvider.tsx</text>
</a>
</g>
</g>
<!-- app/_hooks/useDependency.tsx&#45;&gt;app/_providers/DependencyProvider.tsx -->
<g id="edge1" class="edge">
<title>app/_hooks/useDependency.tsx&#45;&gt;app/_providers/DependencyProvider.tsx</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M120.66,-49C128.57,-49 136.9,-49 145.17,-49"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="145.07,-51.1 151.07,-49 145.07,-46.9 145.07,-51.1"/>
</g>
<!-- src/client/DependencyInjection.ts -->
<g id="node4" class="node">
<title>src/client/DependencyInjection.ts</title>
<g id="a_node4"><a xlink:href="src/client/DependencyInjection.ts" xlink:title="DependencyInjection.ts">
<path fill="#ddfeff" stroke="black" d="M426.08,-42.25C426.08,-42.25 326.42,-42.25 326.42,-42.25 323.33,-42.25 320.25,-39.17 320.25,-36.08 320.25,-36.08 320.25,-29.92 320.25,-29.92 320.25,-26.83 323.33,-23.75 326.42,-23.75 326.42,-23.75 426.08,-23.75 426.08,-23.75 429.17,-23.75 432.25,-26.83 432.25,-29.92 432.25,-29.92 432.25,-36.08 432.25,-36.08 432.25,-39.17 429.17,-42.25 426.08,-42.25"/>
<text text-anchor="start" x="328.25" y="-29.7" font-family="Helvetica,sans-Serif" font-size="9.00">DependencyInjection.ts</text>
</a>
</g>
</g>
<!-- app/_hooks/useDependency.tsx&#45;&gt;src/client/DependencyInjection.ts -->
<g id="edge2" class="edge">
<title>app/_hooks/useDependency.tsx&#45;&gt;src/client/DependencyInjection.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M97.59,-39.32C109.12,-35.26 123.18,-31.02 136.25,-29 194.93,-19.93 262.69,-22.25 311.03,-26.06"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="310.66,-28.13 316.81,-26.53 311.01,-23.95 310.66,-28.13"/>
</g>
<!-- app/_providers/DependencyProvider.tsx&#45;&gt;src/client/DependencyInjection.ts -->
<g id="edge3" class="edge">
<title>app/_providers/DependencyProvider.tsx&#45;&gt;src/client/DependencyInjection.ts</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M270.37,-43.36C283.59,-42.05 297.75,-40.65 311.25,-39.32"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="311.23,-41.43 317,-38.75 310.82,-37.25 311.23,-41.43"/>
</g>
<!-- app/_providers/ReactQueryClientProvider.tsx -->
<g id="node5" class="node">
<title>app/_providers/ReactQueryClientProvider.tsx</title>
<g id="a_node5"><a xlink:href="app/_providers/ReactQueryClientProvider.tsx" xlink:title="ReactQueryClientProvider.tsx">
<path fill="#bbfeff" stroke="black" d="M274.08,-89.25C274.08,-89.25 150.42,-89.25 150.42,-89.25 147.33,-89.25 144.25,-86.17 144.25,-83.08 144.25,-83.08 144.25,-76.92 144.25,-76.92 144.25,-73.83 147.33,-70.75 150.42,-70.75 150.42,-70.75 274.08,-70.75 274.08,-70.75 277.17,-70.75 280.25,-73.83 280.25,-76.92 280.25,-76.92 280.25,-83.08 280.25,-83.08 280.25,-86.17 277.17,-89.25 274.08,-89.25"/>
<text text-anchor="start" x="152.25" y="-76.7" font-family="Helvetica,sans-Serif" font-size="9.00">ReactQueryClientProvider.tsx</text>
</a>
</g>
</g>
<!-- app/_providers/ReactQueryClientProvider.tsx&#45;&gt;app/_hooks/useDependency.tsx -->
<g id="edge4" class="edge">
<title>app/_providers/ReactQueryClientProvider.tsx&#45;&gt;app/_hooks/useDependency.tsx</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M164.38,-70.26C155.05,-68.25 145.33,-66.1 136.25,-64 132.68,-63.17 131.81,-62.87 128.25,-62 126.6,-61.6 124.93,-61.19 123.23,-60.79"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="123.95,-58.8 117.62,-59.44 122.97,-62.88 123.95,-58.8"/>
</g>
<!-- app/globals.css -->
<g id="node6" class="node">
<title>app/globals.css</title>
<g id="a_node6"><a xlink:href="app/globals.css" xlink:title="globals.css">
<path fill="#ffffcc" stroke="black" d="M236.96,-238.25C236.96,-238.25 187.54,-238.25 187.54,-238.25 184.46,-238.25 181.38,-235.17 181.38,-232.08 181.38,-232.08 181.38,-225.92 181.38,-225.92 181.38,-222.83 184.46,-219.75 187.54,-219.75 187.54,-219.75 236.96,-219.75 236.96,-219.75 240.04,-219.75 243.12,-222.83 243.12,-225.92 243.12,-225.92 243.12,-232.08 243.12,-232.08 243.12,-235.17 240.04,-238.25 236.96,-238.25"/>
<text text-anchor="start" x="189.38" y="-225.7" font-family="Helvetica,sans-Serif" font-size="9.00">globals.css</text>
</a>
</g>
</g>
<!-- app/layout.tsx -->
<g id="node7" class="node">
<title>app/layout.tsx</title>
<g id="a_node7"><a xlink:href="app/layout.tsx" xlink:title="layout.tsx">
<path fill="#bbfeff" stroke="black" d="M93.08,-134.25C93.08,-134.25 51.17,-134.25 51.17,-134.25 48.08,-134.25 45,-131.17 45,-128.08 45,-128.08 45,-121.92 45,-121.92 45,-118.83 48.08,-115.75 51.17,-115.75 51.17,-115.75 93.08,-115.75 93.08,-115.75 96.17,-115.75 99.25,-118.83 99.25,-121.92 99.25,-121.92 99.25,-128.08 99.25,-128.08 99.25,-131.17 96.17,-134.25 93.08,-134.25"/>
<text text-anchor="start" x="53" y="-121.7" font-family="Helvetica,sans-Serif" font-size="9.00">layout.tsx</text>
</a>
</g>
</g>
<!-- app/layout.tsx&#45;&gt;app/_components/Background/Background.tsx -->
<g id="edge6" class="edge">
<title>app/layout.tsx&#45;&gt;app/_components/Background/Background.tsx</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M99.43,-129.57C117.59,-132.73 142.26,-137.01 163.8,-140.76"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="163.25,-142.79 169.52,-141.75 163.97,-138.65 163.25,-142.79"/>
</g>
<!-- app/layout.tsx&#45;&gt;app/_providers/DependencyProvider.tsx -->
<g id="edge7" class="edge">
<title>app/layout.tsx&#45;&gt;app/_providers/DependencyProvider.tsx</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M93.93,-115.26C105.46,-108.93 119.24,-99.68 128.25,-88 134.86,-79.43 128.14,-72.16 136.25,-65 139.25,-62.35 142.58,-60.1 146.12,-58.2"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="146.81,-60.2 151.41,-55.81 145.07,-56.37 146.81,-60.2"/>
</g>
<!-- app/layout.tsx&#45;&gt;app/_providers/ReactQueryClientProvider.tsx -->
<g id="edge8" class="edge">
<title>app/layout.tsx&#45;&gt;app/_providers/ReactQueryClientProvider.tsx</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M99.43,-116.43C120.34,-109.62 149.88,-99.99 173.35,-92.35"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="173.76,-94.42 178.81,-90.57 172.46,-90.43 173.76,-94.42"/>
</g>
<!-- app/layout.tsx&#45;&gt;app/globals.css -->
<g id="edge5" class="edge">
<title>app/layout.tsx&#45;&gt;app/globals.css</title>
<path fill="none" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" d="M84.27,-134.41C95.83,-144.43 114.17,-161 128.25,-177 132.24,-181.54 131.71,-184.01 136.25,-188 149.01,-199.22 165.37,-208.61 179.54,-215.56"/>
<polygon fill="#000000" fill-opacity="0.200000" stroke="#000000" stroke-width="2" stroke-opacity="0.200000" points="178.54,-217.4 184.86,-218.07 180.33,-213.6 178.54,-217.4"/>
</g>
<!-- app/page.tsx -->
<g id="node8" class="node">
<title>app/page.tsx</title>
<g id="a_node8"><a xlink:href="app/page.tsx" xlink:title="page.tsx">
<path fill="#ccffcc" stroke="black" d="M92.96,-201.25C92.96,-201.25 51.29,-201.25 51.29,-201.25 48.21,-201.25 45.12,-198.17 45.12,-195.08 45.12,-195.08 45.12,-188.92 45.12,-188.92 45.12,-185.83 48.21,-182.75 51.29,-182.75 51.29,-182.75 92.96,-182.75 92.96,-182.75 96.04,-182.75 99.12,-185.83 99.12,-188.92 99.12,-188.92 99.12,-195.08 99.12,-195.08 99.12,-198.17 96.04,-201.25 92.96,-201.25"/>
<text text-anchor="start" x="54.88" y="-188.7" font-family="Helvetica,sans-Serif" font-size="9.00">page.tsx</text>
</a>
</g>
</g>
</g>
</svg>
    <script>
      var gMode = new Mode();

var title2ElementMap = (function makeElementMap() {
  /** @type {NodeListOf<SVGGElement>} */
  var nodes = document.querySelectorAll(".node");
  /** @type {NodeListOf<SVGGElement>} */
  var edges = document.querySelectorAll(".edge");
  return new Title2ElementMap(edges, nodes);
})();

function getHoverHandler(pTitle2ElementMap) {
  /** @type {string} */
  var currentHighlightedTitle = "";

  /** @param {MouseEvent} pMouseEvent */
  return function hoverHighlightHandler(pMouseEvent) {
    var closestNodeOrEdge = pMouseEvent.target.closest(".edge, .node");
    var closestTitleText = getTitleText(closestNodeOrEdge);

    if (
      currentHighlightedTitle !== closestTitleText &&
      gMode.get() === gMode.HOVER
    ) {
      resetNodesAndEdges();
      addHighlight(closestNodeOrEdge);
      pTitle2ElementMap.get(closestTitleText).forEach(addHighlight);
      currentHighlightedTitle = closestTitleText;
    }
  };
}

function getSelectHandler(pTitle2ElementMap) {
  /** @type {string} */
  var currentHighlightedTitle = "";

  /** @param {MouseEvent} pMouseEvent */
  return function selectHighlightHandler(pMouseEvent) {
    pMouseEvent.preventDefault();

    var closestNodeOrEdge = pMouseEvent.target.closest(".edge, .node");
    var closestTitleText = getTitleText(closestNodeOrEdge);

    if (closestNodeOrEdge) {
      gMode.setToSelect();
    } else {
      gMode.setToHover();
    }
    if (currentHighlightedTitle !== closestTitleText) {
      resetNodesAndEdges();
      addHighlight(closestNodeOrEdge);
      pTitle2ElementMap.get(closestTitleText).forEach(addHighlight);
      currentHighlightedTitle = closestTitleText;
    }
  };
}
function Mode() {
  var HOVER = 1;
  var SELECT = 2;

  function setToHover() {
    this._mode = HOVER;
  }
  function setToSelect() {
    this._mode = SELECT;
  }

  /**
   * @returns {number}
   */
  function get() {
    return this._mode || HOVER;
  }

  return {
    HOVER: HOVER,
    SELECT: SELECT,
    setToHover: setToHover,
    setToSelect: setToSelect,
    get: get,
  };
}

/**
 *
 * @param {SVGGelement[]} pEdges
 * @param {SVGGElement[]} pNodes
 * @return {{get: (pTitleText:string) => SVGGElement[]}}
 */
function Title2ElementMap(pEdges, pNodes) {
  /* {{[key: string]: SVGGElement[]}} */
  var elementMap = buildMap(pEdges, pNodes);

  /**
   * @param {NodeListOf<SVGGElement>} pEdges
   * @param {NodeListOf<SVGGElement>} pNodes
   * @return {{[key: string]: SVGGElement[]}}
   */
  function buildMap(pEdges, pNodes) {
    var title2NodeMap = buildTitle2NodeMap(pNodes);

    return nodeListToArray(pEdges).reduce(addEdgeToMap(title2NodeMap), {});
  }
  /**
   * @param {NodeListOf<SVGGElement>} pNodes
   * @return {{[key: string]: SVGGElement}}
   */
  function buildTitle2NodeMap(pNodes) {
    return nodeListToArray(pNodes).reduce(addNodeToMap, {});
  }

  function addNodeToMap(pMap, pNode) {
    var titleText = getTitleText(pNode);

    if (titleText) {
      pMap[titleText] = pNode;
    }
    return pMap;
  }

  function addEdgeToMap(pNodeMap) {
    return function (pEdgeMap, pEdge) {
      /** @type {string} */
      var titleText = getTitleText(pEdge);

      if (titleText) {
        var edge = pryEdgeFromTitle(titleText);

        pEdgeMap[titleText] = [pNodeMap[edge.from], pNodeMap[edge.to]];
        (pEdgeMap[edge.from] || (pEdgeMap[edge.from] = [])).push(pEdge);
        (pEdgeMap[edge.to] || (pEdgeMap[edge.to] = [])).push(pEdge);
      }
      return pEdgeMap;
    };
  }

  /**
   *
   * @param {string} pString
   * @return {{from?: string; to?:string;}}
   */
  function pryEdgeFromTitle(pString) {
    var nodeNames = pString.split(/\s*->\s*/);

    return {
      from: nodeNames.shift(),
      to: nodeNames.shift(),
    };
  }
  /**
   *
   * @param {string} pTitleText
   * @return {SVGGElement[]}
   */
  function get(pTitleText) {
    return (pTitleText && elementMap[pTitleText]) || [];
  }
  return {
    get: get,
  };
}

/**
 * @param {SVGGElement} pGElement
 * @return {string?}
 */
function getTitleText(pGElement) {
  /** @type {SVGTitleElement} */
  var title = pGElement && pGElement.querySelector("title");
  /** @type {string} */
  var titleText = title && title.textContent;

  if (titleText) {
    titleText = titleText.trim();
  }
  return titleText;
}

/**
 * @param {NodeListOf<Element>} pNodeList
 * @return {Element[]}
 */
function nodeListToArray(pNodeList) {
  var lReturnValue = [];

  pNodeList.forEach(function (pElement) {
    lReturnValue.push(pElement);
  });

  return lReturnValue;
}

function resetNodesAndEdges() {
  nodeListToArray(document.querySelectorAll(".current")).forEach(
    removeHighlight,
  );
}

/**
 * @param {SVGGElement} pGElement
 */
function removeHighlight(pGElement) {
  if (pGElement && pGElement.classList) {
    pGElement.classList.remove("current");
  }
}

/**
 * @param {SVGGElement} pGroup
 */
function addHighlight(pGroup) {
  if (pGroup && pGroup.classList) {
    pGroup.classList.add("current");
  }
}

var gHints = {
  HIDDEN: 1,
  SHOWN: 2,
  state: 1, // === HIDDEN
  show: function () {
    document.getElementById("hints").removeAttribute("style");
    gHints.state = gHints.SHOWN;
  },
  hide: function () {
    document.getElementById("hints").style = "display:none";
    gHints.state = gHints.HIDDEN;
  },
  toggle: function () {
    if ((gHints.state || gHints.HIDDEN) === gHints.HIDDEN) {
      gHints.show();
    } else {
      gHints.hide();
    }
  },
};

/** @param {KeyboardEvent} pKeyboardEvent */
function keyboardEventHandler(pKeyboardEvent) {
  if (pKeyboardEvent.key === "Escape") {
    resetNodesAndEdges();
    gMode.setToHover();
    gHints.hide();
  }
  if (pKeyboardEvent.key === "F1") {
    pKeyboardEvent.preventDefault();
    gHints.toggle();
  }
}

document.addEventListener("contextmenu", getSelectHandler(title2ElementMap));
document.addEventListener("mouseover", getHoverHandler(title2ElementMap));
document.addEventListener("keydown", keyboardEventHandler);
document.getElementById("close-hints").addEventListener("click", gHints.hide);
document.getElementById("button_help").addEventListener("click", gHints.toggle);
document.querySelector("svg").insertAdjacentHTML(
  "afterbegin",
  `<linearGradient id="edgeGradient">
      <stop offset="0%" stop-color="fuchsia"/>
      <stop offset="100%" stop-color="purple"/>
   </linearGradient>
  `,
);

// Add a small increment to the last value of the path to make gradients on
// horizontal paths work. Without them all browsers I tested with (firefox,
// chrome) do not render the gradient, but instead make the line transparent
// (or the color of the background, I haven't looked into it that deeply,
// but for the hack it doesn't matter which).
function skewLineABit(lDrawingInstructions) {
  var lLastValue = lDrawingInstructions.match(/(\d+\.?\d*)$/)[0];
  // Smaller values than .001 _should_ work as well, but don't in all
  // cases. Even this value is so small that it is not visible to the
  // human eye (tested with the two I have at my disposal).
  var lIncrement = 0.001;
  var lNewLastValue = parseFloat(lLastValue) + lIncrement;

  return lDrawingInstructions.replace(lLastValue, lNewLastValue);
}

nodeListToArray(document.querySelectorAll("path"))
  .filter(function (pElement) {
    return pElement.parentElement.classList.contains("edge");
  })
  .forEach(function (pElement) {
    pElement.attributes.d.value = skewLineABit(pElement.attributes.d.value);
  });

    </script>
  </body>
</html>
